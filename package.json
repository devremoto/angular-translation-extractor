{
  "name": "angular-translation-extractor",
  "displayName": "Angular Translation Extractor",
  "author": {
    "name": "Adilson de Almeida Pedro",
    "email": "adilson@almeidapedro.com.br",
    "url": "https://adilson.almeidapedro.com.br",
    "github": "https://github.com/devremoto",
    "twitter": "https://twitter.com/devremoto",
    "linkedin": "https://www.linkedin.com/in/adilsonpedro/"
  },
  "icon": "assets/angular.ico",
  "description": "Extracts Angular app strings from JS/TS/HTML, generates per-file locale JSONs and translation loader artifacts.",
  "version": "0.0.27",
  "publisher": "AdilsondeAlmeidaPedro",
  "repository": {
    "type": "git",
    "url": "https://github.com/devremoto/angular-tanslation-extractor"
  },
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": [
    "Other"
  ],
  "main": "./dist/extension.js",
  "activationEvents": [
    "onStartupFinished",
    "onLanguage:json",
    "onLanguage:jsonc"
  ],
  "contributes": {
    "commands": [
      {
        "command": "angularTranslation.extract",
        "title": "Extract translations (All app)",
        "category": "Angular Translation"
      },
      {
        "command": "angularTranslation.extractFile",
        "title": "Extract translations (File)",
        "category": "Angular Translation"
      },
      {
        "command": "angularTranslation.extractSelection",
        "title": "Extract translations (Selection)",
        "category": "Angular Translation"
      },
      {
        "command": "angularTranslation.reverseFromFolder",
        "title": "Reverse Translate (Folder)",
        "category": "Angular Translation"
      },
      {
        "command": "angularTranslation.reverseFromFile",
        "title": "Reverse Translate (File)",
        "category": "Angular Translation"
      },
      {
        "command": "angularTranslation.reverseSelection",
        "title": "Reverse Translate (Selection)",
        "category": "Angular Translation"
      },
      {
        "command": "angularTranslation.extractSelectionParenthesis",
        "title": "Extract Selection into ( 'KEY' | translate )",
        "category": "Angular Translation"
      },
      {
        "command": "angularTranslation.insertSelector",
        "title": "Insert Language Selector",
        "category": "Angular Translation"
      },
      {
        "command": "angularTranslation.pruneSelectedKeys",
        "title": "Prune Selected Translation Keys (JSON)",
        "category": "Angular Translation"
      },
      {
        "command": "angularTranslation.excludeWorkspacePath",
        "title": "Exclude from Workspace Scan",
        "category": "Angular Translation"
      },
      {
        "command": "angularTranslation.clearWorkspaceState",
        "title": "Clear i18n Workspace State",
        "category": "Angular Translation"
      }
    ],
    "submenus": [
      {
        "id": "angularTranslation.menu",
        "label": "Angular Translation Extractor"
      }
    ],
    "menus": {
      "commandPalette": [
        {
          "command": "angularTranslation.extract",
          "group": "navigation"
        },
        {
          "command": "angularTranslation.reverseFromFolder",
          "group": "navigation"
        },
        {
          "command": "angularTranslation.reverseFromFile",
          "group": "navigation"
        }
      ],
      "explorer/context": [
        {
          "submenu": "angularTranslation.menu",
          "group": "navigation",
          "when": "resourceScheme == file"
        }
      ],
      "editor/context": [
        {
          "submenu": "angularTranslation.menu",
          "group": "navigation",
          "when": "resourceLangId == typescript || resourceLangId == html || resourceLangId == json || resourceLangId == jsonc"
        }
      ],
      "angularTranslation.menu": [
        {
          "command": "angularTranslation.extract",
          "group": "1_extract",
          "when": "(!editorFocus || !editorHasSelection) && (!(resourceLangId == json || resourceLangId == jsonc || resourceExtname == .json) || angularTranslation.isDefaultLocaleJsonEditor)"
        },
        {
          "command": "angularTranslation.extractFile",
          "group": "1_extract",
          "when": "!explorerResourceIsFolder && (!editorFocus || !editorHasSelection) && (resourceLangId == typescript || resourceLangId == html || resourceExtname == .ts || resourceExtname == .html)"
        },
        {
          "command": "angularTranslation.extractSelection",
          "group": "1_extract",
          "when": "editorFocus && editorHasSelection && (resourceLangId == typescript || resourceLangId == html)"
        },
        {
          "command": "angularTranslation.extractSelectionParenthesis",
          "group": "1_extract",
          "when": "editorFocus && editorHasSelection && (resourceLangId == typescript || resourceLangId == html)"
        },
        {
          "command": "angularTranslation.reverseFromFolder",
          "group": "2_reverse",
          "when": "explorerResourceIsFolder"
        },
        {
          "command": "angularTranslation.reverseFromFile",
          "group": "2_reverse",
          "when": "!explorerResourceIsFolder && (!editorFocus || !editorHasSelection) && (resourceLangId == typescript || resourceLangId == html || resourceExtname == .ts || resourceExtname == .html)"
        },
        {
          "command": "angularTranslation.reverseSelection",
          "group": "2_reverse",
          "when": "editorFocus && editorHasSelection && (resourceLangId == typescript || resourceLangId == html)"
        },
        {
          "command": "angularTranslation.insertSelector",
          "group": "3_utils",
          "when": "resourceLangId == html || resourceExtname == .html"
        },
        {
          "command": "angularTranslation.pruneSelectedKeys",
          "group": "3_utils",
          "when": "editorFocus && editorHasSelection && angularTranslation.isDefaultLocaleJsonEditor"
        },
        {
          "command": "angularTranslation.excludeWorkspacePath",
          "group": "3_utils",
          "when": "resourceScheme == file"
        }
      ]
    },
    "configuration": {
      "title": "Angular Translation Extractor",
      "properties": {
        "i18nExtractor.srcDir": {
          "type": "string",
          "default": "src",
          "description": "Folder to scan (relative to workspace root)."
        },
        "i18nExtractor.outputRoot": {
          "type": "string",
          "default": "src/assets/i18n",
          "description": "Output root folder (relative to workspace root). Folder structure from srcDir will be replicated inside."
        },
        "i18nExtractor.languagesJsonPath": {
          "type": "string",
          "default": "src/app/core/json/language-code.json",
          "description": "Path to JSON containing array of locales to generate. Missing englishName/nativeName/flag will be auto-filled. The language marked with 'default': true will be used as the base locale."
        },
        "i18nExtractor.minStringLength": {
          "type": "number",
          "default": 2,
          "description": "Ignore strings shorter than this."
        },
        "i18nExtractor.ignoreGlobs": {
          "type": "array",
          "default": [
            "**/*.test.*",
            "**/*.spec.*",
            "**/node_modules/**",
            "**/dist/**",
            "**/build/**",
            "**/.next/**",
            "**/.angular/**",
            "**/index.html",
            "**/assets/**",
            "**/environments/**",
            "**/.agent/**",
            "**/.vscode/**"
          ],
          "items": {
            "type": "string"
          },
          "description": "Glob patterns to ignore during scan."
        },
        "i18nExtractor.htmlAttributeNames": {
          "type": "array",
          "default": [
            "title",
            "alt",
            "placeholder",
            "aria-label",
            "aria-placeholder"
          ],
          "items": {
            "type": "string"
          },
          "description": "HTML attribute names to extract string values from."
        },
        "i18nExtractor.mainTsPath": {
          "type": "string",
          "default": "{srcDir}/main.ts",
          "description": "Path to Angular main.ts. You can use {srcDir} as a placeholder."
        },
        "i18nExtractor.angularBootstrapStyle": {
          "type": "string",
          "default": "standalone",
          "enum": [
            "standalone",
            "module"
          ],
          "description": "How to wire TranslateModule in main.ts."
        },
        "i18nExtractor.useTranslateCommand": {
          "type": "boolean",
          "default": false,
          "description": "If true, run a translation command after generating base JSONs."
        },
        "i18nExtractor.translateCommand": {
          "type": "string",
          "default": "npx-translate",
          "description": "Command to run (only if useTranslateCommand=true)."
        },
        "i18nExtractor.translateArgsTemplate": {
          "type": "array",
          "default": [
            "--input",
            "{baseFile}",
            "--outDir",
            "{outDir}",
            "--from",
            "{baseLocale}",
            "--to",
            "{targetLocale}"
          ],
          "items": {
            "type": "string"
          },
          "description": "Args template. Placeholders: {baseFile} {outDir} {baseLocale} {targetLocale}"
        },
        "i18nExtractor.updateMode": {
          "type": "string",
          "enum": [
            "merge",
            "overwrite",
            "recreate"
          ],
          "default": "merge",
          "description": "Controls how JSON translation files and generated files are updated. 'merge': Only adds new blank properties (preserves existing translations and JSON structure). 'overwrite': Recreates all JSON files except the default language. 'recreate': Recreates all files including the default language."
        },
        "i18nExtractor.skipGlobs": {
          "type": "array",
          "default": [],
          "items": {
            "type": "string"
          },
          "description": "Additional glob patterns to skip during scan (merged with ignoreGlobs)."
        },
        "i18nExtractor.autoTranslate": {
          "type": "boolean",
          "default": true,
          "description": "If true, automatically initiate translations for all target languages after extracting base locale strings."
        },
        "i18nExtractor.autoTranslateDefaultLanguage": {
          "type": "boolean",
          "default": false,
          "description": "If false, skip translating the default language marked with 'default': true in i18n-languages.json. The default language is used as the translation source, so it typically doesn't need to be translated."
        },
        "i18nExtractor.aggressiveMode": {
          "type": "string",
          "enum": [
            "low",
            "moderate",
            "high"
          ],
          "default": "moderate",
          "description": "Controls extraction aggressiveness for strings inside function parameters. low: blocks all; moderate: allows multi-word or single-word > 10 chars; high: allows all with no length limit. Restricted strings are reported in src/translate/aggressive-mode-restricted.json."
        },
        "i18nExtractor.aggressiveModeAllowCallRegex": {
          "type": "array",
          "default": [
            "^alert\\s*\\(",
            "^confirm\\s*\\(",
            "^prompt\\s*\\("
          ],
          "items": {
            "type": "string"
          },
          "description": "Array of regex patterns matched against full function call source (example: alert('teste')). If matched, extraction is allowed and has priority over aggressiveMode."
        },
        "i18nExtractor.aggressiveModeAllowContextRegex": {
          "type": "array",
          "default": [
            "^window\\.alert\\(arg#1\\)$",
            "^window\\.confirm\\(arg#1\\)$",
            "^window\\.prompt\\(arg#1\\)$"
          ],
          "items": {
            "type": "string"
          },
          "description": "Array of regex patterns matched against function argument context (example: this.toastr.error(arg#1)). If matched, extraction is allowed and has priority over aggressiveMode."
        },
        "i18nExtractor.googleTranslateDelay": {
          "type": "number",
          "default": 500,
          "description": "Delay between translation requests in milliseconds to avoid rate limiting (minimum 100ms). Used for Google Translate."
        }
      }
    }
  },
  "scripts": {
    "compile-tests": "tsc -p . --outDir out",
    "watch-tests": "tsc -p . -w --outDir out",
    "pretest": "npm run compile-tests && npm run compile && npm run lint",
    "lint": "eslint src --max-warnings=999",
    "test": "vscode-test",
    "clean": "rimraf dist out",
    "compile": "npm run clean && npm run check-types && node esbuild.js",
    "check-types": "tsc --noEmit",
    "watch": "npm run clean && npm-run-all -p watch:*",
    "watch:esbuild": "node esbuild.js --watch",
    "watch:tsc": "tsc --noEmit --watch --project tsconfig.json",
    "vscode:prepublish": "npm run package",
    "package": "npm run check-types && node esbuild.js --production"
  },
  "devDependencies": {
    "@types/babel__traverse": "^7.20.5",
    "@types/node": "^20.10.0",
    "@types/vscode": "^1.85.0",
    "@typescript-eslint/eslint-plugin": "^8.55.0",
    "@typescript-eslint/parser": "^8.55.0",
    "esbuild": "^0.24.2",
    "eslint": "^9.39.2",
    "eslint-plugin-import": "^2.32.0",
    "npm-run-all": "^4.1.5",
    "rimraf": "^6.1.2",
    "typescript": "^5.4.0"
  },
  "dependencies": {
    "@babel/parser": "^7.24.0",
    "@babel/traverse": "^7.24.0",
    "axios": "^1.7.9",
    "fast-glob": "^3.3.2",
    "punycode": "^2.3.1",
    "ts-morph": "^27.0.2"
  }
}